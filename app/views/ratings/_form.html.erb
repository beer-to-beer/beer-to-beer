<link href="/assets/ratingbar.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet"
      type="text/css"/>
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="/assets/jquery.barrating.js"></script>

<div class="body">
  <div class="breadcrumbs margin-bottom-50">
    <div class="container">
      <h1 class="color-green pull-left">New Rating</h1>
      <ul class="pull-right breadcrumb">
        <li><a href="index.html">Home</a> <span class="divider">/</span></li>
        <li><%= link_to 'Beers' ,beers_path%><span class="divider">/</span></li>
        <li><%= link_to Beer.find(params[:beer_id]).title,Beer.find(params[:beer_id])%></a> <span class="divider">/</span></li>
        <li class="active">Rating</li>
      </ul>
    </div><!--/container-->
  </div><!--/breadcrumbs-->

  <div class="container">
    <div class="row-fluid margin-bottom-10">

<%= form_for(@rating,  html: {class: "reg-page"}) do |f| %>
          <h2>Rate <%=Beer.find(params[:beer_id]).title %></h2>
  <% if @rating.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@rating.errors.count, "error") %> prohibited this rating from being saved:</h2>

      <ul>
      <% @rating.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>



          <% if current_user %>
   <%= f.hidden_field :beer_id,:value => params[:beer_id]%>
    <%= f.hidden_field :user_id, :value => current_user.id%>
              <div class="controls">


            <%= f.fields_for :criterions,@criterion do |info| %>
                <div class="fields">

                  <% if info.index == 0 %>

                      <%= info.hidden_field :name, :value => "Price" %>
                      <div class="form-group">
                        <div class="input select rating-a">
                          <label for="example-a">Price:</label>
                          <%= info.select :value, ['1', '2', '3','4','5','6','7','8','9','10'], class: "form-control"%>
                        </div>
                      </div>
                  <% end %>
                  <% if info.index == 1%>

                          <%= info.hidden_field :name, :value => "Taste" %>
                          <div class="form-group">
                            <div class="input select rating-a">
                              <label for="example-a">Taste:</label>
                              <%= info.select :value, ['1', '2', '3','4','5','6','7','8','9','10'], class: "form-control"%>
                            </div>
                          </div>
                  <% end %>
                  <% if info.index == 2%>

                                  <%= info.hidden_field :name, :value => "Headache" %>
                                  <div class="form-group">
                                    <div class="input select rating-a">
                                      <label for="example-a">Headache:</label>
                                      <%= info.select :value, ['1', '2', '3','4','5','6','7','8','9','10'], class: "form-control"%>
                                    </div>
                                  </div>
                  <% end %>


                </div>





            <% end %>

        

  <div class="field">
    <%= f.label :comment %><br>
    <%= f.text_area :comment, class: "span12" %>
  </div>
              </div>
              <div class="controls form-inline">
    <%= f.submit class: "btn-u pull-right"%>
  </div>


<% else %>
       <h3> please <%= link_to 'login', new_user_session_path,data: { no_turbolink: true } %> to rate a beer</h3>
 <% end %>
<% end %>
    </div><!--/row-fluid-->
  </div><!--/container-->
</div><!--/body-->

<script>
$('#rating_criterions_attributes_0_value').barrating();
$('#rating_criterions_attributes_1_value').barrating();
$('#rating_criterions_attributes_2_value').barrating();
</script>